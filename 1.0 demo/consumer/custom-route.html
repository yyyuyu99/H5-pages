<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åŸä¹¡æ–‡åŒ–ç›´è¿å¹³å° - å®šåˆ¶è·¯çº¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
        }
        
        body {
            background-color: #f7f7f7;
            color: #333333;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: hidden;
        }
        
        /* iPhone 15 Pro Max å¤–å£³ */
        .device-container {
            position: relative;
            width: 375px;
            height: 812px;
            margin: 20px auto;
            background: #000;
            border-radius: 55px;
            box-shadow: 0 15px 25px rgba(0,0,0,0.3);
            padding: 10px;
            overflow: hidden;
        }
        
        /* é¡¶éƒ¨åˆ˜æµ· */
        .notch {
            position: absolute;
            width: 180px;
            height: 32px;
            background: #000;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            border-bottom-left-radius: 18px;
            border-bottom-right-radius: 18px;
            z-index: 999;
        }
        
        /* å±å¹• */
        .screen {
            position: relative;
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 45px;
            overflow: hidden;
        }
        
        /* çŠ¶æ€æ  */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px 5px;
            font-size: 14px;
            font-weight: 600;
            color: #000;
            z-index: 100;
            position: relative;
        }
        
        .status-left {
            letter-spacing: 1px;
        }
        
        .status-right {
            display: flex;
            align-items: center;
        }
        
        .battery-icon {
            width: 25px;
            height: 13px;
            border: 1px solid currentColor;
            border-radius: 3px;
            padding: 2px;
            position: relative;
        }
        
        .battery-icon:after {
            content: '';
            position: absolute;
            width: 3px;
            height: 4px;
            background: currentColor;
            right: -4px;
            top: 50%;
            transform: translateY(-50%);
            border-radius: 0 2px 2px 0;
        }
        
        .battery-level {
            height: 100%;
            width: 65%;
            background: currentColor;
            border-radius: 1px;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            position: absolute;
            top: 48px;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 70px;
        }
        
        /* å¯¼èˆªå¤´éƒ¨ */
        .nav-header {
            padding: 10px 16px;
            position: sticky;
            top: 0;
            background: #fff;
            z-index: 10;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .page-title {
            font-size: 22px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }
        
        /* åº•éƒ¨å¯¼èˆªæ  */
        .tab-bar {
            height: 50px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            border-top: 1px solid rgba(0,0,0,0.05);
            padding-bottom: 5px;
            z-index: 10;
            border-bottom-left-radius: 45px;
            border-bottom-right-radius: 45px;
        }
        
        .tab-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 25%;
            position: relative;
            z-index: 1;
            cursor: pointer;
        }
        
        .tab-icon {
            font-size: 22px;
            margin-bottom: 2px;
            color: #999;
        }
        
        .tab-item.active .tab-icon {
            color: #8D6E63;
        }
        
        .tab-text {
            font-size: 10px;
            color: #999;
        }
        
        .tab-item.active .tab-text {
            color: #8D6E63;
        }
        
        /* æ¨¡æ‹Ÿå›¾æ ‡ */
        .icon {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: inherit;
        }
        
        /* è·¯çº¿å®šåˆ¶åŒºåŸŸåŸºæœ¬æ ·å¼ */
        .route-intro {
            padding: 20px 16px;
            background: linear-gradient(to right, #F9F7F4, #F3F0E9);
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            margin: 0 12px 15px;
        }
        
        .intro-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            position: relative;
            z-index: 2;
        }
        
        .intro-desc {
            position: relative;
            z-index: 2;
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }
        
        .route-intro::before {
            content: '';
            position: absolute;
            right: -15px;
            bottom: -15px;
            width: 80px;
            height: 80px;
            background-image: url('https://images.pexels.com/photos/7412095/pexels-photo-7412095.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            background-size: cover;
            border-radius: 50%;
            opacity: 0.2;
            z-index: 1;
        }
        
        /* è‡ªå®šä¹‰è¡¨å• */
        .custom-form {
            padding: 15px 16px;
            background: white;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .form-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
        }
        
        .form-title::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 3px;
            background: #8D6E63;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            display: block;
            font-weight: 500;
        }
        
        .label-tip {
            font-size: 12px;
            color: #999;
            font-weight: normal;
            margin-left: 5px;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            font-size: 14px;
            color: #333;
            background: #f9f9f9;
        }
        
        .destination-select {
            position: relative;
        }
        
        .destination-select select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            font-size: 14px;
            color: #333;
            background: #f9f9f9;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }
        
        .destination-select select:focus {
            outline: none;
            border-color: #8D6E63;
            box-shadow: 0 0 0 2px rgba(141, 110, 99, 0.1);
        }
        
        .select-arrow {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 10px;
            color: #999;
            pointer-events: none;
        }
        
        .days-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .day-option {
            flex: 1;
            min-width: calc(25% - 10px);
            padding: 8px 5px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            text-align: center;
            font-size: 13px;
            color: #666;
            background: #f9f9f9;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .day-option.active {
            background: rgba(141, 110, 99, 0.1);
            color: #8D6E63;
            border-color: #8D6E63;
            font-weight: 500;
        }
        
        .price-slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .price-slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            background: #E0E0E0;
            border-radius: 3px;
            outline: none;
        }
        
        .price-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #8D6E63;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .price-value {
            font-size: 16px;
            font-weight: 600;
            color: #8D6E63;
            min-width: 70px;
            text-align: right;
        }
        
        .price-range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }
        
        .interest-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .interest-tag {
            padding: 10px 15px;
            background: #f5f5f5;
            border-radius: 20px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .interest-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
        }
        
        .interest-tag.active {
            background: #8D6E63;
            color: white;
            border-color: rgba(255,255,255,0.3);
            box-shadow: 0 3px 8px rgba(141, 110, 99, 0.3);
        }
        
        .special-needs {
            width: 100%;
            height: 80px;
            border-radius: 6px;
            border: 1px solid rgba(0,0,0,0.1);
            padding: 12px 15px;
            font-size: 14px;
            background: white;
            color: #333;
            resize: none;
            font-family: inherit;
        }
        
        .contact-input {
            width: 100%;
            height: 44px;
            border-radius: 6px;
            border: 1px solid rgba(0,0,0,0.1);
            padding: 0 15px;
            font-size: 14px;
            background: white;
            color: #333;
        }
        
        .submit-btn {
            height: 48px;
            background: #8D6E63;
            color: white;
            border-radius: 24px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            font-weight: 500;
            margin-top: 25px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .submit-btn:active {
            opacity: 0.9;
        }
        
        /* æ¨èè·¯çº¿æ ·å¼ */
        .recommended-routes {
            padding: 16px 12px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            padding-left: 4px;
        }
        
        .route-card {
            position: relative;
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(141, 110, 99, 0.1);
        }
        
        .route-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.12);
        }
        
        .route-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        
        .route-content {
            padding: 14px 16px;
        }
        
        .route-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
        }
        
        .route-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .route-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .route-days {
            font-size: 13px;
            color: #666;
            display: flex;
            align-items: center;
        }
        
        .meta-icon {
            margin-right: 4px;
            font-size: 14px;
        }
        
        .route-price {
            font-size: 16px;
            font-weight: 600;
            color: #8D6E63;
        }
        
        .price-unit {
            font-size: 12px;
            font-weight: normal;
            color: #999;
        }
        
        .route-tags {
            display: flex;
            gap: 8px;
        }
        
        .route-tag {
            font-size: 11px;
            color: #8D6E63;
            background: rgba(141, 110, 99, 0.1);
            padding: 3px 10px;
            border-radius: 100px;
        }
        
        .route-popular-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(141, 110, 99, 0.8);
            color: white;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        /* æ—¶å°šå…ƒç´  - èƒŒæ™¯è£…é¥° */
        .decorative-bg {
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05));
            z-index: -1;
        }
        
        .decorative-bg-1 {
            top: -50px;
            right: -50px;
        }
        
        .decorative-bg-2 {
            bottom: 30%;
            left: -70px;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, rgba(141, 110, 99, 0.08), rgba(141, 110, 99, 0.03));
        }
        
        /* è§†è§‰è£…é¥°å…ƒç´  */
        .visual-element {
            position: absolute;
            z-index: -1;
            opacity: 0.5;
        }
        
        /* AIåŠ©æ‰‹æ ·å¼ */
        .ai-assistant {
            position: fixed;
            bottom: 70px;
            right: 16px;
            width: 50px;
            height: 50px;
            background: #8D6E63;
            border-radius: 50%;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            z-index: 101;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .ai-assistant.active {
            transform: rotate(45deg);
        }
        
        .ai-chat-panel {
            position: fixed;
            bottom: 65px;
            left: 0;
            right: 0;
            height: 60%;
            background: white;
            z-index: 100;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        
        .ai-chat-panel.active {
            transform: translateY(0);
        }
        
        .ai-chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .ai-chat-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .ai-chat-close {
            font-size: 18px;
            color: #999;
            cursor: pointer;
            padding: 5px;
        }
        
        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .ai-chat-message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .ai-chat-message.outgoing {
            align-items: flex-end;
        }
        
        .ai-chat-message.incoming {
            align-items: flex-start;
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 18px;
            font-size: 14px;
            margin-top: 2px;
            line-height: 1.4;
        }
        
        .outgoing .message-bubble {
            background: #8D6E63;
            color: white;
            border-top-right-radius: 5px;
        }
        
        .incoming .message-bubble {
            background: #F5F5F5;
            border-top-left-radius: 5px;
        }
        
        .message-time {
            font-size: 10px;
            color: #999;
            margin-top: 3px;
        }
        
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
            max-width: 300px;
        }
        
        .quick-reply {
            background: #F5F5F5;
            border: 1px solid #DDD;
            border-radius: 16px;
            padding: 6px 12px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
        }
        
        .ai-chat-input {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .ai-chat-input input {
            flex: 1;
            border: none;
            background: #F5F5F5;
            border-radius: 20px;
            padding: 10px 15px;
            font-size: 14px;
            outline: none;
        }
        
        .ai-chat-send {
            width: 34px;
            height: 34px;
            background: #8D6E63;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            margin-left: 10px;
            cursor: pointer;
        }
        
        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .chat-message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-message.user {
            align-items: flex-end;
        }
        
        .chat-message.ai {
            align-items: flex-start;
        }
        
        .user .message-bubble {
            background: #8D6E63;
            color: white;
            border-top-right-radius: 5px;
        }
        
        .ai .message-bubble {
            background: #F5F5F5;
            border-top-left-radius: 5px;
        }
        
        /* å¿«é€Ÿå›å¤é€‰é¡¹ */
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            max-width: 280px;
        }
        
        .quick-reply {
            background: #F5F5F5;
            border: 1px solid #DDD;
            border-radius: 16px;
            padding: 6px 12px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
        }
        
        .quick-reply:hover {
            background: #EEEEEE;
            color: #8D6E63;
            border-color: #8D6E63;
        }
        
        /* AI æ¨è */
        .ai-suggestion {
            background: rgba(141, 110, 99, 0.08);
            border-radius: 12px;
            padding: 12px;
            margin-top: 10px;
            border-left: 3px solid #8D6E63;
            max-width: 280px;
        }
        
        .suggestion-title {
            font-weight: 500;
            color: #8D6E63;
            margin-bottom: 5px;
            font-size: 13px;
            display: flex;
            align-items: center;
        }
        
        .suggestion-title:before {
            content: "ğŸ’¡";
            margin-right: 5px;
        }
        
        .suggestion-content {
            font-size: 13px;
            color: #555;
            line-height: 1.4;
        }
        
        .suggestion-choice {
            display: flex;
            align-items: center;
            margin-top: 8px;
        }
        
        .choice-button {
            background: white;
            border: 1px solid #DDD;
            border-radius: 16px;
            padding: 4px 12px;
            font-size: 12px;
            color: #666;
            margin-right: 8px;
            cursor: pointer;
        }
        
        .choice-button.accept {
            background: #8D6E63;
            color: white;
            border-color: #8D6E63;
        }
        
        /* AIåŠ©æ‰‹æŒ‰é’® */
        .ai-assistant-btn {
            position: absolute;
            bottom: 120px;
            right: 16px;
            width: 50px;
            height: 50px;
            background: #8D6E63;
            border-radius: 50%;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            z-index: 101;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .ai-assistant-btn:active {
            transform: scale(0.95);
        }
        
        /* æ–¹æ¡ˆå¡ç‰‡æ ·å¼ */
        .solution-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            margin: 15px 0;
            overflow: hidden;
            border: 1px solid rgba(141, 110, 99, 0.2);
        }
        
        .solution-header {
            background: #8D6E63;
            color: white;
            padding: 12px 15px;
            font-weight: 600;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .solution-content {
            padding: 15px;
        }
        
        .solution-item {
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .solution-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #555;
            display: flex;
            align-items: center;
        }
        
        .solution-item-title .icon {
            margin-right: 5px;
            color: #8D6E63;
        }
        
        .solution-item-content {
            color: #666;
            line-height: 1.5;
        }
        
        .solution-days {
            margin-top: 15px;
        }
        
        .solution-day {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
        }
        
        .solution-day-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #8D6E63;
        }
        
        .solution-action {
            text-align: center;
            margin-top: 15px;
        }
        
        .solution-btn {
            background: #8D6E63;
            color: white;
            border-radius: 20px;
            padding: 8px 20px;
            display: inline-block;
            font-size: 14px;
            cursor: pointer;
        }
        
        .solution-btn:hover {
            opacity: 0.9;
        }
        
        .ai-helper-toggle {
            display: flex;
            justify-content: center;
            margin-top: 25px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .ai-helper-toggle:before {
            content: '';
            position: absolute;
            top: -15px;
            left: 10%;
            right: 10%;
            height: 1px;
            background: rgba(0,0,0,0.1);
        }
        
        .ai-toggle-btn {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #8D6E63, #A1887F);
            color: white;
            border: none;
            border-radius: 24px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(141, 110, 99, 0.2);
        }
        
        .ai-toggle-btn:hover {
            background: linear-gradient(135deg, #7D5E53, #917769);
            box-shadow: 0 6px 15px rgba(141, 110, 99, 0.3);
        }
        
        .ai-toggle-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 5px rgba(141, 110, 99, 0.2);
        }
        
        .ai-icon {
            margin-right: 8px;
            font-size: 18px;
        }
        
        .tag-checkbox {
            display: inline-flex;
            align-items: center;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .tag-checkbox input[type="checkbox"] {
            display: none;
        }
        
        .tag-checkbox label {
            padding: 8px 12px;
            background: #f5f5f5;
            border-radius: 20px;
            font-size: 13px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .tag-checkbox input[type="checkbox"]:checked + label {
            background: rgba(141, 110, 99, 0.1);
            color: #8D6E63;
            border-color: #8D6E63;
        }
        
        .tags-container {
            display: flex;
            flex-wrap: wrap;
            margin-top: 5px;
        }
        
        #submitBtn {
            width: 100%;
            height: 48px;
            background: #8D6E63;
            color: white;
            border: none;
            border-radius: 24px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 10px rgba(141, 110, 99, 0.2);
        }
        
        #submitBtn:hover {
            background: #7D5E53;
            box-shadow: 0 6px 12px rgba(141, 110, 99, 0.3);
        }
        
        #submitBtn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 5px rgba(141, 110, 99, 0.2);
        }
    </style>
</head>
<body>
    <div class="device-container">
        <div class="notch"></div>
        <div class="screen">
            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <div class="status-left">12:30</div>
                <div class="status-right">
                    <span style="margin-right: 5px;">5G</span>
                    <div class="battery-icon">
                        <div class="battery-level"></div>
                    </div>
                </div>
            </div>
            
            <!-- å†…å®¹åŒºåŸŸ -->
            <div class="content">
                <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
                <div class="nav-header">
                    <div class="back-button" id="backButton">â†</div>
                    <div class="page-title">å®šåˆ¶è·¯çº¿</div>
                </div>
                
                <!-- è£…é¥°èƒŒæ™¯å…ƒç´  -->
                <div class="decorative-bg decorative-bg-1"></div>
                <div class="decorative-bg decorative-bg-2"></div>
                
                <!-- è·¯çº¿å®šåˆ¶ä»‹ç» -->
                <div class="route-intro">
                    <div class="intro-title">ä¸ªæ€§åŒ–ä¹¡æ‘æ–‡åŒ–ä¹‹æ—…</div>
                    <div class="intro-desc">æ ¹æ®æ‚¨çš„å…´è¶£ã€æ—¶é—´å’Œé¢„ç®—ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨å®šåˆ¶ä¸“å±çš„ä¹¡æ‘æ–‡åŒ–ä½“éªŒè·¯çº¿ï¼Œæ·±åº¦æ¢ç´¢ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–çš„é­…åŠ›ã€‚</div>
                </div>
                
                <!-- AIåŠ©æ‰‹èŠå¤©åŒºåŸŸ -->
                <div class="chat-area" id="chatArea">
                    <!-- AIæ¬¢è¿æ¶ˆæ¯ -->
                    <div class="chat-message ai">
                        <div class="message-bubble">
                            æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„ç§äººæ—…è¡Œè§„åˆ’åŠ©æ‰‹ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³å»å“ªé‡Œä½“éªŒä¼ ç»Ÿæ–‡åŒ–ï¼Œæˆ–è€…æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å…´è¶£çˆ±å¥½ï¼Ÿæˆ‘ä¼šä¸ºæ‚¨æ¨èåˆé€‚çš„è·¯çº¿ã€‚
                        </div>
                        <div class="message-time">14:30</div>
                        <div class="quick-replies">
                            <div class="quick-reply" data-value="äº‘å—">äº‘å—</div>
                            <div class="quick-reply" data-value="æ±Ÿå—">æ±Ÿå—</div>
                            <div class="quick-reply" data-value="è¥¿åŒ—">è¥¿åŒ—</div>
                            <div class="quick-reply" data-value="è´µå·">è´µå·</div>
                        </div>
                    </div>
                </div>
                
                <!-- æ¶ˆæ¯è¾“å…¥æ  -->
                <div class="ai-chat-input">
                    <input type="text" id="messageInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜æˆ–éœ€æ±‚...">
                    <div class="ai-chat-send" id="sendButton">â¤</div>
                </div>
                
                <!-- AIåŠ©æ‰‹æµ®åŠ¨æŒ‰é’® -->
                <div class="ai-assistant-btn" id="aiAssistantBtn">ğŸ’¬</div>
                
                <!-- è‡ªå®šä¹‰è¡¨å• -->
                <div class="custom-form" id="customForm">
                    <div class="form-title">è·¯çº¿å®šåˆ¶</div>
                    
                    <!-- ç›®çš„åœ°é€‰æ‹© -->
                    <div class="form-group">
                        <div class="form-label">ç›®çš„åœ°</div>
                        <div class="form-input destination-select">
                            <select id="destination">
                                <option value="">è¯·é€‰æ‹©ç›®çš„åœ°</option>
                                <option value="äº‘å—">äº‘å—</option>
                                <option value="è´µå·">è´µå·</option>
                                <option value="å››å·">å››å·</option>
                                <option value="æµ™æ±Ÿ">æµ™æ±Ÿ</option>
                                <option value="æ±Ÿè¥¿">æ±Ÿè¥¿</option>
                                <option value="ç¦å»º">ç¦å»º</option>
                                <option value="å¹¿è¥¿">å¹¿è¥¿</option>
                            </select>
                            <div class="select-arrow">â–¼</div>
                        </div>
                    </div>
                    
                    <!-- è¡Œç¨‹å¤©æ•° -->
                    <div class="form-group">
                        <div class="form-label">è¡Œç¨‹å¤©æ•°</div>
                        <div class="days-selector">
                            <div class="day-option">1-2å¤©</div>
                            <div class="day-option">3-5å¤©</div>
                            <div class="day-option">6-7å¤©</div>
                            <div class="day-option">8å¤©ä»¥ä¸Š</div>
                        </div>
                    </div>
                    
                    <!-- äººå‡é¢„ç®— -->
                    <div class="form-group">
                        <div class="form-label">äººå‡é¢„ç®—</div>
                        <div class="form-input">
                            <input type="range" min="1000" max="10000" step="500" value="3000" id="budgetRange" style="width: 100%;">
                            <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                                <span style="font-size: 12px; color: #999;">Â¥1,000</span>
                                <span id="budgetDisplay" style="font-size: 14px; color: #8D6E63; font-weight: 500;">Â¥3,000</span>
                                <span style="font-size: 12px; color: #999;">Â¥10,000+</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å…´è¶£ä¸»é¢˜ -->
                    <div class="form-group">
                        <div class="form-label">å…´è¶£ä¸»é¢˜<span class="label-tip">ï¼ˆå¯å¤šé€‰ï¼‰</span></div>
                        <div class="tags-container">
                            <div class="tag-checkbox"><input type="checkbox" id="tag1"><label for="tag1">æ–‡åŒ–ä½“éªŒ</label></div>
                            <div class="tag-checkbox"><input type="checkbox" id="tag2"><label for="tag2">ç¾é£Ÿæ¢ç´¢</label></div>
                            <div class="tag-checkbox"><input type="checkbox" id="tag3"><label for="tag3">æ‰‹å·¥è‰º</label></div>
                            <div class="tag-checkbox"><input type="checkbox" id="tag4"><label for="tag4">èŒ¶è‰º</label></div>
                            <div class="tag-checkbox"><input type="checkbox" id="tag5"><label for="tag5">æ°‘æ—èˆè¹ˆ</label></div>
                            <div class="tag-checkbox"><input type="checkbox" id="tag6"><label for="tag6">åˆºç»£</label></div>
                        </div>
                    </div>
                    
                    <!-- ç‰¹æ®Šéœ€æ±‚ -->
                    <div class="form-group">
                        <div class="form-label">ç‰¹æ®Šéœ€æ±‚<span class="label-tip">ï¼ˆå¯é€‰ï¼‰</span></div>
                        <textarea class="form-input" placeholder="æè¿°æ‚¨çš„ç‰¹æ®Šéœ€æ±‚ï¼Œå¦‚è€äººã€å„¿ç«¥åŒè¡Œï¼Œåå¥½ä½å®¿ç±»å‹ç­‰" rows="3"></textarea>
                    </div>
                    
                    <!-- è”ç³»æ–¹å¼ -->
                    <div class="form-group">
                        <div class="form-label">è”ç³»æ–¹å¼</div>
                        <input type="tel" class="form-input contact-input" placeholder="è¯·è¾“å…¥æ‰‹æœºå·ï¼Œæ¥æ”¶å®šåˆ¶æ–¹æ¡ˆ">
                    </div>
                    
                    <!-- æäº¤æŒ‰é’® -->
                    <div class="form-submit">
                        <button id="submitBtn">æäº¤å®šåˆ¶éœ€æ±‚</button>
                    </div>
                    
                    <!-- AIåŠ©æ‰‹åˆ‡æ¢ -->
                    <div class="ai-helper-toggle">
                        <div class="ai-toggle-btn" id="aiToggleBtn">
                            <span class="ai-icon">ğŸ¤–</span>
                            <span>å°æ¾å¡”AIåŠ©æ‰‹å¸®æˆ‘è§„åˆ’</span>
                        </div>
                    </div>
                </div>
                
                <!-- çƒ­é—¨è·¯çº¿æ¨è -->
                <div class="recommended-routes">
                    <div class="section-title">çƒ­é—¨è·¯çº¿æ¨è</div>
                    
                    <!-- è·¯çº¿å¡ç‰‡1 -->
                    <div class="route-card">
                        <div class="route-popular-badge">çƒ­é—¨æ¨è</div>
                        <img src="https://www.qdndz.gov.cn/xwzx/bmdt/202404/W020240401334282873412.jpg" class="route-image" alt="äº‘å—å¤å¯¨èŒ¶é“ä¹‹æ—…">
                        <div class="route-content">
                            <div class="route-title">äº‘å—å¤å¯¨èŒ¶é“ä¹‹æ—…</div>
                            <div class="route-desc">æ¢è®¿å°‘æ•°æ°‘æ—å¤å¯¨ï¼Œå­¦ä¹ å¤æ ‘èŒ¶é‡‡æ‘˜åˆ¶ä½œï¼Œä½“éªŒä¸–ç•ŒèŒ¶æºåœ°çš„ç‹¬ç‰¹é­…åŠ›</div>
                            <div class="route-meta">
                                <div class="route-days"><span class="meta-icon">ğŸ—“ï¸</span> 5å¤©4æ™š</div>
                                <div class="route-price">Â¥3680<span class="price-unit">/äººèµ·</span></div>
                            </div>
                            <div class="route-tags">
                                <div class="route-tag">èŒ¶æ–‡åŒ–</div>
                                <div class="route-tag">æ°‘æ—é£æƒ…</div>
                                <div class="route-tag">è‡ªç„¶ä½“éªŒ</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è·¯çº¿å¡ç‰‡2 -->
                    <div class="route-card">
                        <img src="https://upload.bjsyqw.com/2024/0409/1712645205463.jpg" class="route-image" alt="é»”ä¸œå—éé—æ¢ç´¢ä¹‹æ—…">
                        <div class="route-content">
                            <div class="route-title">é»”ä¸œå—éé—æ¢ç´¢ä¹‹æ—…</div>
                            <div class="route-desc">æ·±å…¥è´µå·å±±åŒºï¼Œä½“éªŒè‹—ä¾—æ–‡åŒ–ï¼Œå­¦ä¹ èœ¡æŸ“ã€åˆºç»£ã€é“¶é¥°åˆ¶ä½œï¼Œæ„Ÿå—éç‰©è´¨æ–‡åŒ–é—äº§çš„é­…åŠ›</div>
                            <div class="route-meta">
                                <div class="route-days"><span class="meta-icon">ğŸ—“ï¸</span> 6å¤©5æ™š</div>
                                <div class="route-price">Â¥4280<span class="price-unit">/äººèµ·</span></div>
                            </div>
                            <div class="route-tags">
                                <div class="route-tag">éé—æ–‡åŒ–</div>
                                <div class="route-tag">æ‰‹å·¥è‰º</div>
                                <div class="route-tag">æ°‘æ—é£æƒ…</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è·¯çº¿å¡ç‰‡3 -->
                    <div class="route-card">
                        <div class="route-popular-badge">ç‰¹è‰²ä½“éªŒ</div>
                        <img src="https://q1.itc.cn/images01/20241118/3cf34f58df6c4ae5bc7a03b1c4816ad6.png" class="route-image" alt="æ±Ÿå—æ°´ä¹¡å·¥è‰ºä¹‹æ—…">
                        <div class="route-content">
                            <div class="route-title">æ±Ÿå—æ°´ä¹¡å·¥è‰ºä¹‹æ—…</div>
                            <div class="route-desc">è¡Œèµ°å¤é•‡æ°´ä¹¡ï¼Œä½“éªŒä¸ç»¸ã€é’ç“·ã€æ‰‡è‰ºç­‰æ±Ÿå—ä¼ ç»Ÿå·¥è‰ºï¼Œæ„Ÿå—æ±Ÿå—æ–‡åŒ–çš„ç²¾è‡´ä¸éŸµå‘³</div>
                            <div class="route-meta">
                                <div class="route-days"><span class="meta-icon">ğŸ—“ï¸</span> 4å¤©3æ™š</div>
                                <div class="route-price">Â¥2980<span class="price-unit">/äººèµ·</span></div>
                            </div>
                            <div class="route-tags">
                                <div class="route-tag">å¤é•‡æ°´ä¹¡</div>
                                <div class="route-tag">ä¼ ç»Ÿå·¥è‰º</div>
                                <div class="route-tag">æ–‡åŒ–ä½“éªŒ</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- åº•éƒ¨å¯¼èˆªæ  -->
            <div class="tab-bar">
                <div class="tab-item">
                    <div class="icon tab-icon">ğŸ¡</div>
                    <div class="tab-text">é¦–é¡µ</div>
                </div>
                <div class="tab-item">
                    <div class="icon tab-icon">ğŸ§¶</div>
                    <div class="tab-text">ä½“éªŒ</div>
                </div>
                <div class="tab-item active">
                    <div class="icon tab-icon">ğŸ—ºï¸</div>
                    <div class="tab-text">è·¯çº¿</div>
                </div>
                <div class="tab-item">
                    <div class="icon tab-icon">ğŸ‘¤</div>
                    <div class="tab-text">æˆ‘çš„</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åº•éƒ¨å¯¼èˆªåˆ‡æ¢
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.addEventListener('click', function() {
                const route = this.querySelector('.tab-text').textContent;
                console.log('åˆ‡æ¢åˆ°:', route);
                // æ ¹æ®è·¯ç”±è¿›è¡Œé¡µé¢è·³è½¬
                if (route === 'é¦–é¡µ') {
                    window.location.href = 'index.html';
                } else if (route === 'ä½“éªŒ') {
                    window.location.href = 'cultural-experience.html';
                } else if (route === 'æˆ‘çš„') {
                    window.location.href = 'user-center.html';
                }
                // å½“å‰é¡µé¢æ˜¯è·¯çº¿é¡µï¼Œä¸è·³è½¬
            });
        });
        
        // AIèŠå¤©åŠŸèƒ½
        const chatArea = document.getElementById('chatArea');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        
        // å½“å‰å¼•å¯¼é—®é¢˜ç´¢å¼•å’Œç”¨æˆ·åå¥½
        let currentQuestionIndex = 0;
        const userPreferences = {
            destination: '',
            duration: '',
            interests: [],
            travelGroup: '',
            budget: ''
        };
        
        // å¼•å¯¼é—®é¢˜åˆ—è¡¨
        const guidedQuestions = [
            "æ‚¨æƒ³å»å“ªé‡Œä½“éªŒä¼ ç»Ÿæ–‡åŒ–ï¼Ÿ", // å·²åœ¨æ¬¢è¿æ¶ˆæ¯ä¸­æé—®
            "æ‚¨è®¡åˆ’å‡ºè¡Œå¤šå°‘å¤©ï¼Ÿ",
            "æ‚¨å¯¹å“ªäº›ç±»å‹çš„æ–‡åŒ–ä½“éªŒæ›´æ„Ÿå…´è¶£ï¼Ÿ(å¦‚èŒ¶è‰ºã€é™¶è‰ºã€åˆºç»£ç­‰)",
            "æ‚¨æ˜¯ç‹¬è‡ªå‡ºè¡Œè¿˜æ˜¯ç»“ä¼´åŒè¡Œï¼Ÿ",
            "æ‚¨çš„é¢„ç®—èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"
        ];
        
        // è®¾ç½®å¿«é€Ÿå›å¤é€‰é¡¹
        function setupQuickReplies() {
            // ä¸ºæ‰€æœ‰å¿«é€Ÿå›å¤æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.quick-reply').forEach(reply => {
                reply.addEventListener('click', function() {
                    // è·å–å›å¤å†…å®¹
                    const replyValue = this.dataset.value;
                    handleQuickReply(replyValue);
                });
            });
        }
        
        // å¤„ç†å¿«é€Ÿå›å¤é€‰æ‹©
        function handleQuickReply(replyValue) {
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°èŠå¤©åŒºåŸŸ
            addMessage('user', replyValue);
            
            // æ ¹æ®å½“å‰é—®é¢˜ç´¢å¼•å­˜å‚¨ç”¨æˆ·å›ç­”
            if (currentQuestionIndex === 0) {
                userPreferences.destination = replyValue;
            } else if (currentQuestionIndex === 1) {
                userPreferences.duration = replyValue;
            } else if (currentQuestionIndex === 2) {
                userPreferences.interests.push(replyValue);
            } else if (currentQuestionIndex === 3) {
                userPreferences.travelGroup = replyValue;
            } else if (currentQuestionIndex === 4) {
                userPreferences.budget = replyValue;
            }
            
            // å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé—®é¢˜
            currentQuestionIndex++;
            
            // å¦‚æœå·²å›ç­”å®Œæ‰€æœ‰é—®é¢˜ï¼Œæä¾›æ¨è
            if (currentQuestionIndex >= guidedQuestions.length) {
                // å»¶è¿Ÿæ˜¾ç¤ºæ€è€ƒä¸­çŠ¶æ€
                setTimeout(() => {
                    addMessage('ai', 'æˆ‘æ­£åœ¨æ ¹æ®æ‚¨çš„å–œå¥½ä¸ºæ‚¨è§„åˆ’è·¯çº¿...');
                    
                    // å†å»¶è¿Ÿæ˜¾ç¤ºæ¨è
                    setTimeout(() => {
                        provideRecommendation();
                    }, 1500);
                }, 500);
            } else {
                // å¦åˆ™ç»§ç»­æé—®
                askNextGuidedQuestion();
            }
        }
        
        // æé—®ä¸‹ä¸€ä¸ªå¼•å¯¼é—®é¢˜
        function askNextGuidedQuestion() {
            setTimeout(() => {
                // è·å–ä¸‹ä¸€ä¸ªé—®é¢˜
                const nextQuestion = guidedQuestions[currentQuestionIndex];
                
                // æ·»åŠ AIæ¶ˆæ¯
                const messageElement = addMessage('ai', nextQuestion);
                
                // æ ¹æ®å½“å‰é—®é¢˜è®¾ç½®å¿«é€Ÿå›å¤é€‰é¡¹
                let quickReplies = [];
                
                if (currentQuestionIndex === 1) { // è¡Œç¨‹å¤©æ•°
                    quickReplies = ['3-5å¤©', '6-8å¤©', '9-15å¤©', '15å¤©ä»¥ä¸Š'];
                } else if (currentQuestionIndex === 2) { // æ–‡åŒ–ä½“éªŒç±»å‹
                    quickReplies = ['èŒ¶è‰º', 'é™¶è‰º', 'åˆºç»£', 'æ‰‹å·¥è‰º', 'ä¼ ç»Ÿç¾é£Ÿ', 'æ°‘æ—èˆè¹ˆ'];
                } else if (currentQuestionIndex === 3) { // å‡ºè¡Œäººç¾¤
                    quickReplies = ['ç‹¬è‡ªå‡ºè¡Œ', 'æƒ…ä¾£å‡ºè¡Œ', 'äº²å­å‡ºè¡Œ', 'æœ‹å‹å‡ºè¡Œ'];
                } else if (currentQuestionIndex === 4) { // é¢„ç®—èŒƒå›´
                    quickReplies = ['3000ä»¥å†…', '3000-5000', '5000-8000', '8000ä»¥ä¸Š'];
                }
                
                // å¦‚æœæœ‰å¿«é€Ÿå›å¤é€‰é¡¹ï¼Œåˆ™æ·»åŠ åˆ°æ¶ˆæ¯ä¸­
                if (quickReplies.length > 0) {
                    const quickRepliesContainer = document.createElement('div');
                    quickRepliesContainer.className = 'quick-replies';
                    
                    quickReplies.forEach(reply => {
                        const replyElement = document.createElement('div');
                        replyElement.className = 'quick-reply';
                        replyElement.textContent = reply;
                        replyElement.dataset.value = reply;
                        replyElement.addEventListener('click', function() {
                            handleQuickReply(this.dataset.value);
                        });
                        quickRepliesContainer.appendChild(replyElement);
                    });
                    
                    messageElement.appendChild(quickRepliesContainer);
                }
            }, 800);
        }
        
        // æä¾›æ¨è
        function provideRecommendation() {
            // æ ¹æ®ç”¨æˆ·åå¥½ç”Ÿæˆæ¨èå†…å®¹
            let recommendationText = "";
            let recommendedRoute = "";
            
            // æ ¹æ®ç›®çš„åœ°å’Œå…´è¶£å®šåˆ¶æ¨è
            if (userPreferences.destination === 'äº‘å—') {
                if (userPreferences.interests.includes('èŒ¶è‰º')) {
                    recommendationText = "æ ¹æ®æ‚¨çš„åå¥½ï¼Œæˆ‘ä¸ºæ‚¨æ¨èäº‘å—èŒ¶æ–‡åŒ–ä¹‹æ—…ï¼Œæ‚¨å¯ä»¥ä½“éªŒå¤æ³•æ™®æ´±èŒ¶åˆ¶ä½œï¼Œå‚è§‚åƒå¹´å¤èŒ¶æ ‘ï¼Œå¹¶åœ¨å½“åœ°èŒ¶å†œå®¶ä¸­ä½“éªŒé‡‡èŒ¶æ´»åŠ¨ã€‚";
                    recommendedRoute = "äº‘å—æ™®æ´±èŒ¶æ–‡åŒ–æ·±åº¦ä½“éªŒ5æ—¥æ¸¸";
                } else if (userPreferences.interests.includes('æ°‘æ—èˆè¹ˆ') || userPreferences.interests.includes('åˆºç»£')) {
                    recommendationText = "å»ºè®®æ‚¨ä½“éªŒäº‘å—å°‘æ•°æ°‘æ—æ–‡åŒ–ä¹‹æ—…ï¼Œæ‚¨å¯ä»¥åœ¨è¥¿åŒç‰ˆçº³ä½“éªŒå‚£æ—æ³¼æ°´èŠ‚ï¼Œåœ¨ä¸½æ±Ÿæ„Ÿå—çº³è¥¿æ—ä¸œå·´æ–‡åŒ–ï¼Œåœ¨å¤§ç†å­¦ä¹ ç™½æ—æ‰æŸ“æŠ€è‰ºã€‚";
                    recommendedRoute = "äº‘å—æ°‘æ—æ–‡åŒ–æ¢ç´¢7æ—¥æ¸¸";
                } else {
                    recommendationText = "ä¸ºæ‚¨æ¨èäº‘å—æ–‡åŒ–æ¢ç´¢ä¹‹æ—…ï¼ŒåŒ…æ‹¬æ™®æ´±èŒ¶æ–‡åŒ–ä½“éªŒã€ç™½æ—æ‰æŸ“å·¥è‰ºå’Œå‚£æ—å»ºç­‘è‰ºæœ¯æ¬£èµç­‰å¤šå…ƒæ–‡åŒ–ä½“éªŒã€‚";
                    recommendedRoute = "äº‘å—å¤šå…ƒæ–‡åŒ–ä½“éªŒ6æ—¥æ¸¸";
                }
            } else if (userPreferences.destination === 'æ±Ÿå—') {
                if (userPreferences.interests.includes('æ‰‹å·¥è‰º')) {
                    recommendationText = "ä¸ºæ‚¨æ¨èæ±Ÿå—éé—æ¢ç´¢ä¹‹æ—…ï¼Œæ‚¨å¯ä»¥åœ¨è‹å·ä½“éªŒä¸ç»¸åˆ¶ä½œå·¥è‰ºï¼Œåœ¨æ­å·å­¦ä¹ æ²¹çº¸ä¼åˆ¶ä½œï¼Œåœ¨å®æ³¢æ¢ç´¢å”å¡ç»˜ç”»è‰ºæœ¯ã€‚";
                    recommendedRoute = "æ±Ÿå—å·¥è‰ºæ¢ç´¢5æ—¥æ¸¸";
                } else {
                    recommendationText = "ä¸ºæ‚¨æ¨èæ±Ÿå—æ°´ä¹¡æ–‡åŒ–ä½“éªŒï¼ŒåŒ…æ‹¬æ­å·è¥¿æ¹–èŒ¶æ–‡åŒ–ã€è‹å·å›­æ—è‰ºæœ¯é‰´èµå’Œå‘¨åº„æ°´ä¹¡ç”Ÿæ´»ä½“éªŒã€‚";
                    recommendedRoute = "æ±Ÿå—æ°´ä¹¡æ–‡åŒ–4æ—¥æ¸¸";
                }
            } else if (userPreferences.destination === 'è´µå·') {
                recommendationText = "ä¸ºæ‚¨æ¨èå¤šå½©è´µå·æ°‘æ—æ–‡åŒ–ä¹‹æ—…ï¼Œæ‚¨å¯ä»¥ä½“éªŒè‹—æ—åˆºç»£è‰ºæœ¯ï¼Œå‚åŠ ä¾—æ—å¤§æ­Œè¡¨æ¼”ï¼Œæ¢ç´¢å¤æ³•é€ çº¸æŠ€è‰ºå’Œé“¶é¥°åˆ¶ä½œå·¥è‰ºã€‚";
                recommendedRoute = "è´µå·éé—æ–‡åŒ–6æ—¥æ¸¸";
            } else if (userPreferences.destination === 'è¥¿åŒ—') {
                recommendationText = "ä¸ºæ‚¨æ¨èä¸è·¯æ–‡åŒ–æ¢ç´¢ä¹‹æ—…ï¼Œæ‚¨å¯ä»¥ä½“éªŒå…°å·æ‹‰é¢åˆ¶ä½œï¼Œå­¦ä¹ æ•¦ç…Œå£ç”»æŠ€è‰ºï¼Œæ¬£èµç§¦è…”è¡¨æ¼”ï¼Œæ¢ç´¢è¥¿åŒ—æ°‘æ—éŸ³ä¹æ–‡åŒ–ã€‚";
                recommendedRoute = "ä¸è·¯æ–‡åŒ–ç²¾å7æ—¥æ¸¸";
            }
            
            // æ·»åŠ AIæ¨èæ¶ˆæ¯
            const aiMessage = addMessage('ai', recommendationText);
            
            // åˆ›å»ºAIæ¨èå»ºè®®å¡ç‰‡
            const suggestionElement = document.createElement('div');
            suggestionElement.className = 'ai-suggestion';
            
            const suggestionTitle = document.createElement('div');
            suggestionTitle.className = 'suggestion-title';
            suggestionTitle.textContent = 'æ¨èè·¯çº¿';
            
            const suggestionContent = document.createElement('div');
            suggestionContent.className = 'suggestion-content';
            suggestionContent.textContent = recommendedRoute;
            
            const suggestionChoice = document.createElement('div');
            suggestionChoice.className = 'suggestion-choice';
            
            const acceptButton = document.createElement('div');
            acceptButton.className = 'choice-button accept';
            acceptButton.textContent = 'ç”Ÿæˆè¯¦ç»†æ–¹æ¡ˆ';
            acceptButton.addEventListener('click', function() {
                addMessage('user', 'è¯·ä¸ºæˆ‘ç”Ÿæˆ' + recommendedRoute + 'çš„è¯¦ç»†æ–¹æ¡ˆ');
                setTimeout(() => {
                    generateCompleteSolution(recommendedRoute);
                }, 1200);
            });
            
            const modifyButton = document.createElement('div');
            modifyButton.className = 'choice-button';
            modifyButton.textContent = 'è°ƒæ•´å»ºè®®';
            modifyButton.addEventListener('click', function() {
                addMessage('user', 'æˆ‘æƒ³è°ƒæ•´ä¸€ä¸‹è¡Œç¨‹å»ºè®®');
                setTimeout(() => {
                    addMessage('ai', 'æ²¡é—®é¢˜ï¼Œæ‚¨å¸Œæœ›å¦‚ä½•è°ƒæ•´ï¼Ÿæ‚¨å¯ä»¥å‘Šè¯‰æˆ‘æ‚¨æƒ³è¦æ›´æ”¹çš„å¤©æ•°ã€æ™¯ç‚¹æˆ–è€…ç‰¹å®šæ´»åŠ¨ã€‚');
                }, 800);
            });
            
            suggestionChoice.appendChild(acceptButton);
            suggestionChoice.appendChild(modifyButton);
            
            suggestionElement.appendChild(suggestionTitle);
            suggestionElement.appendChild(suggestionContent);
            suggestionElement.appendChild(suggestionChoice);
            
            aiMessage.appendChild(suggestionElement);
            
            // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
            chatArea.scrollTop = chatArea.scrollHeight;
        }
        
        // ç”Ÿæˆå®Œæ•´è¯¦ç»†æ–¹æ¡ˆ
        function generateCompleteSolution(routeName) {
            addMessage('ai', 'æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆè¯¦ç»†æ–¹æ¡ˆï¼Œè¯·ç¨ç­‰...');
            
            setTimeout(() => {
                // æ¨¡æ‹Ÿç”Ÿæˆæ–¹æ¡ˆçš„è¿‡ç¨‹
                const solutionHTML = generateSolutionHTML(routeName);
                const aiMessage = addMessage('ai', 'å·²ä¸ºæ‚¨ç”Ÿæˆè¯¦ç»†æ–¹æ¡ˆ:');
                
                // è§£æå¹¶æ·»åŠ HTMLå†…å®¹
                const parser = new DOMParser();
                const solutionDoc = parser.parseFromString(solutionHTML, 'text/html');
                const solutionElement = solutionDoc.body.firstChild;
                
                aiMessage.appendChild(solutionElement);
                
                // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
                chatArea.scrollTop = chatArea.scrollHeight;
            }, 1500);
        }
        
        // æ ¹æ®è·¯çº¿åç§°ç”Ÿæˆè¯¦ç»†æ–¹æ¡ˆHTML
        function generateSolutionHTML(routeName) {
            let days = 5;
            let basePrice = 3680;
            let destination = 'äº‘å—';
            let mainActivities = ['èŒ¶è‰ºä½“éªŒ', 'å¤é•‡æ¢ç´¢', 'æ°‘æ—æ–‡åŒ–'];
            let accommodations = 'ç²¾å“æ°‘å®¿';
            
            // æ ¹æ®è·¯çº¿åç§°è°ƒæ•´å‚æ•°
            if (routeName.includes('7æ—¥æ¸¸')) {
                days = 7;
                basePrice = 4280;
            } else if (routeName.includes('4æ—¥æ¸¸')) {
                days = 4;
                basePrice = 2980;
            } else if (routeName.includes('6æ—¥æ¸¸')) {
                days = 6;
                basePrice = 3980;
            }
            
            if (routeName.includes('æ±Ÿå—')) {
                destination = 'æ±Ÿå—';
                mainActivities = ['æ°´ä¹¡æ¸¸è§ˆ', 'å›­æ—æ¬£èµ', 'å·¥è‰ºä½“éªŒ'];
                accommodations = 'å¤é•‡å®¢æ ˆ';
            } else if (routeName.includes('è´µå·')) {
                destination = 'è´µå·';
                mainActivities = ['è‹—æ—æ–‡åŒ–', 'ä¾—æ—å¤§æ­Œ', 'é“¶é¥°åˆ¶ä½œ'];
                accommodations = 'ç‰¹è‰²æ°‘å®¿';
            } else if (routeName.includes('ä¸è·¯')) {
                destination = 'ç”˜è‚ƒã€é™•è¥¿';
                mainActivities = ['æ•¦ç…Œå£ç”»', 'å…°å·æ‹‰é¢', 'ç§¦è…”è¡¨æ¼”'];
                accommodations = 'ç²¾å“é…’åº—';
            }
            
            let solution = `
            <div class="solution-card">
                <div class="solution-header">
                    <span>${routeName}</span>
                    <span>Â¥${basePrice}/äººèµ·</span>
                </div>
                <div class="solution-content">
                    <div class="solution-item">
                        <div class="solution-item-title"><span class="icon">ğŸ“</span>ç›®çš„åœ°</div>
                        <div class="solution-item-content">${destination}</div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-title"><span class="icon">ğŸ—“ï¸</span>è¡Œç¨‹å¤©æ•°</div>
                        <div class="solution-item-content">${days}å¤©${days-1}æ™š</div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-title"><span class="icon">ğŸ </span>ä½å®¿å®‰æ’</div>
                        <div class="solution-item-content">${accommodations}</div>
                    </div>
                    <div class="solution-item">
                        <div class="solution-item-title"><span class="icon">ğŸ­</span>ä¸»è¦æ´»åŠ¨</div>
                        <div class="solution-item-content">${mainActivities.join('ã€')}</div>
                    </div>
                    
                    <div class="solution-days">
            `;
            
            // ç”Ÿæˆæ¯æ—¥è¡Œç¨‹
            for (let i = 1; i <= days; i++) {
                let dayActivities = '';
                
                if (destination === 'äº‘å—') {
                    switch(i) {
                        case 1: dayActivities = 'æŠµè¾¾äº‘å—ï¼Œå…¥ä½é…’åº—ï¼Œäº†è§£å½“åœ°é£ä¿—'; break;
                        case 2: dayActivities = 'èŒ¶å›­å‚è§‚ï¼Œäº†è§£èŒ¶æ ‘ç§æ¤ï¼Œå“èŒ¶ä½“éªŒ'; break;
                        case 3: dayActivities = 'å¤æ³•åˆ¶èŒ¶å·¥è‰ºå­¦ä¹ ï¼Œäº²æ‰‹åˆ¶ä½œæ™®æ´±èŒ¶'; break;
                        case 4: dayActivities = 'å°‘æ•°æ°‘æ—æ‘å¯¨æ¢è®¿ï¼Œä½“éªŒå½“åœ°ç”Ÿæ´»'; break;
                        case 5: dayActivities = 'å†œå®¶ç‰¹è‰²ç¾é£Ÿä½“éªŒï¼Œè¿”ç¨‹'; break;
                        case 6: dayActivities = 'æ¢è®¿ç™½æ—å¤æ‘è½ï¼Œä½“éªŒæ‰æŸ“è‰ºæœ¯'; break;
                        case 7: dayActivities = 'è‡ªç”±æ´»åŠ¨ï¼Œè¿”ç¨‹'; break;
                    }
                } else if (destination === 'æ±Ÿå—') {
                    switch(i) {
                        case 1: dayActivities = 'æŠµè¾¾è‹å·ï¼Œå›­æ—å‚è§‚ï¼Œå¤é•‡æ¼«æ­¥'; break;
                        case 2: dayActivities = 'ä¸ç»¸åšç‰©é¦†ï¼Œåˆºç»£è‰ºæœ¯ä½“éªŒ'; break;
                        case 3: dayActivities = 'ä¹Œé•‡æ°´ä¹¡ä½“éªŒï¼Œå¤œæ¸¸å¤é•‡'; break;
                        case 4: dayActivities = 'æ­å·è¥¿æ¹–æ¸¸è§ˆï¼ŒèŒ¶æ–‡åŒ–ä½“éªŒï¼Œè¿”ç¨‹'; break;
                    }
                } else if (destination === 'è´µå·') {
                    switch(i) {
                        case 1: dayActivities = 'æŠµè¾¾è´µå·ï¼Œå…¥ä½ç‰¹è‰²æ°‘å®¿ï¼Œäº†è§£å½“åœ°æ–‡åŒ–'; break;
                        case 2: dayActivities = 'è‹—å¯¨æ¢è®¿ï¼Œæ¬£èµè‹—æ—æ­Œèˆè¡¨æ¼”'; break;
                        case 3: dayActivities = 'è‹—æ—åˆºç»£å·¥è‰ºå­¦ä¹ ï¼Œäº²æ‰‹åˆ¶ä½œå°å·¥è‰ºå“'; break;
                        case 4: dayActivities = 'ä¾—æ—å¤§æ­Œè¡¨æ¼”æ¬£èµï¼Œé€ çº¸æŠ€è‰ºä½“éªŒ'; break;
                        case 5: dayActivities = 'é“¶é¥°åˆ¶ä½œå·¥è‰ºå­¦ä¹ ï¼Œä½“éªŒå½“åœ°ç¾é£Ÿ'; break;
                        case 6: dayActivities = 'è‡ªç”±æ´»åŠ¨ï¼Œè¿”ç¨‹'; break;
                    }
                } else {
                    dayActivities = `ç¬¬${i}å¤©è¡Œç¨‹å®‰æ’ï¼Œç²¾å½©ä½“éªŒç­‰å¾…æ‚¨çš„æ¢ç´¢`;
                }
                
                solution += `
                    <div class="solution-day">
                        <div class="solution-day-title">ç¬¬${i}å¤©</div>
                        <div class="solution-day-content">${dayActivities}</div>
                    </div>
                `;
            }
            
            solution += `
                    </div>
                    
                    <div class="solution-action">
                        <div class="solution-btn">æäº¤å®šåˆ¶éœ€æ±‚</div>
                    </div>
                </div>
            </div>
            `;
            
            return solution;
        }
        
        // è®¾ç½®AIåŠ©æ‰‹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('aiAssistantBtn').addEventListener('click', function() {
            const customForm = document.getElementById('customForm');
            const recommendedRoutes = document.querySelector('.recommended-routes');
            
            if (customForm.style.display !== 'none') {
                customForm.style.display = 'none';
                recommendedRoutes.style.display = 'none';
                chatArea.style.display = 'block';
                document.querySelector('.ai-chat-input').style.display = 'flex';
            } else {
                customForm.style.display = 'block';
                recommendedRoutes.style.display = 'block';
                chatArea.style.display = 'none';
                document.querySelector('.ai-chat-input').style.display = 'none';
            }
        });
        
        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const text = messageInput.value.trim();
            if (text !== '') {
                // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
                addMessage('user', text);
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                messageInput.value = '';
                
                // å¦‚æœæ˜¯åœ¨å¼•å¯¼é—®é¢˜æµç¨‹ä¸­ï¼Œåˆ™å¤„ç†ç”¨æˆ·å›ç­”
                if (currentQuestionIndex < guidedQuestions.length) {
                    handleUserInputForGuidedQuestion(text);
                } else {
                    // å¤„ç†è‡ªç”±å¯¹è¯
                    handleUserInput(text);
                }
            }
        }
        
        // å¤„ç†å¼•å¯¼é—®é¢˜ä¸­çš„ç”¨æˆ·è¾“å…¥
        function handleUserInputForGuidedQuestion(text) {
            // æ ¹æ®å½“å‰é—®é¢˜ç´¢å¼•å­˜å‚¨ç”¨æˆ·å›ç­”
            if (currentQuestionIndex === 0) {
                userPreferences.destination = text;
            } else if (currentQuestionIndex === 1) {
                userPreferences.duration = text;
            } else if (currentQuestionIndex === 2) {
                userPreferences.interests = [text];
            } else if (currentQuestionIndex === 3) {
                userPreferences.travelGroup = text;
            } else if (currentQuestionIndex === 4) {
                userPreferences.budget = text;
            }
            
            // å‰è¿›åˆ°ä¸‹ä¸€ä¸ªé—®é¢˜
            currentQuestionIndex++;
            
            // å¦‚æœå·²å›ç­”å®Œæ‰€æœ‰é—®é¢˜ï¼Œæä¾›æ¨è
            if (currentQuestionIndex >= guidedQuestions.length) {
                setTimeout(() => {
                    addMessage('ai', 'æˆ‘æ­£åœ¨æ ¹æ®æ‚¨çš„å–œå¥½ä¸ºæ‚¨è§„åˆ’è·¯çº¿...');
                    
                    setTimeout(() => {
                        provideRecommendation();
                    }, 1500);
                }, 800);
            } else {
                // å¦åˆ™ç»§ç»­æé—®
                askNextGuidedQuestion();
            }
        }
        
        // å¤„ç†è‡ªç”±å¯¹è¯ä¸­çš„ç”¨æˆ·è¾“å…¥
        function handleUserInput(text) {
            // å»¶è¿Ÿæ˜¾ç¤ºAIå›å¤
            setTimeout(() => {
                // å…³é”®è¯è¯†åˆ«
                if (text.includes('é¢„ç®—') || text.includes('å¤šå°‘é’±')) {
                    addMessage('ai', 'æˆ‘ä»¬çš„è·¯çº¿ä»·æ ¼æ ¹æ®å­£èŠ‚å’Œå…·ä½“è¡Œç¨‹å®‰æ’æœ‰æ‰€ä¸åŒã€‚ä»¥æ‚¨é€‰æ‹©çš„ç›®çš„åœ°ä¸ºä¾‹ï¼Œä»·æ ¼å¤§çº¦åœ¨3000-8000å…ƒä¸ç­‰ã€‚æ‚¨æœ‰å…·ä½“çš„é¢„ç®—èŒƒå›´å—ï¼Ÿ');
                } else if (text.includes('æ—¶é—´') || text.includes('å‡ å¤©') || text.includes('å¤šä¹…')) {
                    addMessage('ai', 'æ ¹æ®æ‚¨çš„åå¥½ï¼Œæˆ‘æ¨è5-7å¤©çš„è¡Œç¨‹ï¼Œè¿™æ ·å¯ä»¥å……åˆ†ä½“éªŒå½“åœ°æ–‡åŒ–åˆä¸ä¼šè¿‡äºåŒ†å¿™ã€‚å¦‚æœæ‚¨æ—¶é—´å……è£•ï¼Œå¯ä»¥è€ƒè™‘10å¤©ä»¥ä¸Šçš„æ·±åº¦ä½“éªŒã€‚');
                } else if (text.includes('æ¨è') || text.includes('å»ºè®®')) {
                    provideRecommendation();
                } else {
                    // é»˜è®¤å›å¤
                    addMessage('ai', 'æ„Ÿè°¢æ‚¨çš„ä¿¡æ¯ã€‚æ‚¨å¯¹è¿™ä¸ªæ—…è¡Œè®¡åˆ’è¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–éœ€æ±‚å—ï¼Ÿä¾‹å¦‚ç‰¹å®šçš„ä½å®¿åå¥½ã€é¤é¥®è¦æ±‚æˆ–è€…æƒ³è¦äº†è§£çš„å½“åœ°æ–‡åŒ–æ´»åŠ¨ï¼Ÿ');
                }
            }, 800);
        }
        
        // è®¾ç½®å‘é€æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        sendButton.addEventListener('click', sendMessage);
        
        // è®¾ç½®è¾“å…¥æ¡†å›è½¦äº‹ä»¶
        messageInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // åˆå§‹åŒ–å¿«é€Ÿå›å¤æŒ‰é’®
        document.addEventListener('DOMContentLoaded', setupQuickReplies);
        
        // AIåŠ©æ‰‹åˆ‡æ¢
        document.getElementById('aiToggleBtn').addEventListener('click', function() {
            const aiChatPanel = document.querySelector('.ai-chat-panel');
            const customForm = document.getElementById('customForm');
            
            if (aiChatPanel.classList.contains('active')) {
                // å…³é—­AIåŠ©æ‰‹ï¼Œæ˜¾ç¤ºè¡¨å•
                aiChatPanel.classList.remove('active');
                this.innerHTML = '<span class="ai-icon">ğŸ¤–</span><span>å°æ¾å¡”AIåŠ©æ‰‹å¸®æˆ‘è§„åˆ’</span>';
                customForm.style.maxHeight = '1000px';
                customForm.style.opacity = '1';
            } else {
                // æ‰“å¼€AIåŠ©æ‰‹ï¼Œéšè—è¡¨å•
                aiChatPanel.classList.add('active');
                this.innerHTML = '<span class="ai-icon">ğŸ¤–</span><span>å°æ¾å¡”AIåŠ©æ‰‹å¸®æˆ‘è§„åˆ’</span>';
                
                // æ”¶èµ·è¡¨å•ï¼Œä¸å®Œå…¨éšè—ï¼Œä¿ç•™éƒ¨åˆ†å¯è§
                customForm.style.maxHeight = '150px';
                customForm.style.opacity = '0.7';
                
                // å¦‚æœä¹‹å‰å¡«å†™äº†è¡¨å•ï¼Œå°†ä¿¡æ¯ä¼ é€’ç»™AIåŠ©æ‰‹
                const destination = document.getElementById('destination').value;
                if (destination) {
                    setTimeout(() => {
                        addMessage('user', `æˆ‘æƒ³å»${destination}æ—…è¡Œ`);
                        processUserMessage(`æˆ‘æƒ³å»${destination}æ—…è¡Œ`);
                    }, 500);
                } else {
                    // æ— ç›®çš„åœ°ï¼ŒAIå¼•å¯¼ç”¨æˆ·
                    setTimeout(() => {
                        addMessage('ai', 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„AIæ—…è¡ŒåŠ©æ‰‹ã€‚è¯·å‘Šè¯‰æˆ‘æ‚¨æƒ³å»å“ªé‡Œæ—…è¡Œï¼Œæˆ‘å¯ä»¥å¸®æ‚¨è§„åˆ’è·¯çº¿ã€‚');
                    }, 500);
                }
            }
        });
    </script>
</body>
</html> 